<div class="row">

  <!--Notebooks-->
  <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3">

    <!--Title and new notebook button-->
    <div class="d-flex align-items-center mt-3 mb-1">
      <h4 class="flex-grow-1">Notebooks</h4>
      <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#newNotebookDialog">
        <fa-icon [icon]="['fas', 'plus-circle']" class="text-primary" size="lg"></fa-icon>
      </button>
    </div>

    <!--Connection error message-->
    <div *ngIf="this.nbFetchFailed" class="invalid-feedback d-block">Failed to get notebooks</div>

    <!--Pagination controls-->
    <div>
      <pagination-controls maxSize=5 responsive="true" autoHide="true" previousLabel="" nextLabel=""
                           (pageChange)="page = $event">
      </pagination-controls>
    </div>

    <!--Notebooks list-->
    <ul class="list-group">
      <li class="list-group-item list-group-item-action d-flex align-items-center pr-2 pt-2 pb-2"
          [class.active]="selectedNb===notebook" (click)="selectNb(notebook)"
          *ngFor="let notebook of notebooks | paginate: { itemsPerPage: 5, currentPage: page }">
        <input class="flex-grow-1" type="text" value="{{notebook.name}}"
               (change)="updateNotebook($event,notebook)"
               [readOnly]="selectedNb!==notebook"
        >
        <button type="button" class="btn btn-sm" *ngIf="selectedNb===notebook" (click)="deleteNotebook(notebook)">
          <fa-icon [icon]="['fas', 'trash-alt']" class="text-danger"></fa-icon>
        </button>
        <span class="badge badge-dark badge-pill">{{notebook.size}}</span>
      </li>
    </ul>
  </div>

  <!--Notes-->
  <div class="col-sm-6 col-md-8 col-lg-9 col-xl-9">

    <!--Title and new note button-->
    <div class="d-flex align-items-center mt-3 mb-1">
      <h4 class="flex-grow-1">Notes</h4>
      <button type="button" class="btn btn-sm">
        <fa-icon [icon]="['fas', 'plus-circle']" class="text-primary" size="lg"></fa-icon>
      </button>
    </div>

    <!--Connection error message-->
    <div *ngIf="this.notesFetchFailed" class="invalid-feedback d-block">Failed to get notes</div>

    <!--Note cards-->
    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3 mb-4" *ngFor="let note of notes">
        <div class="card">

          <!--Title and delete note button-->
          <div class="card-header d-flex align-items-center pr-1 pt-1 pb-1">
            <div class="flex-grow-1">{{note.title}}</div>
            <button type="button" class="btn btn-sm">
              <fa-icon [icon]="['fas', 'trash-alt']" class="text-danger"></fa-icon>
            </button>
          </div>

          <!--Note content-->
          <div class="card-body">
            <p class="card-text">{{note.text}}</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- New notebook Modal -->
<div class="modal fade" data-backdrop="static" id="newNotebookDialog" tabindex="-1" role="dialog"
     aria-labelledby="newNbTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newNbTitle">Create a new notebook</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label for="inputNbName">Notebook name:</label>
        <input type="text"
               id="inputNbName"
               [(ngModel)]="newNotebookName"
               class="form-control">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="createNotebook(newNotebookName)">
          Create notebook
        </button>
      </div>
    </div>
  </div>
</div>
